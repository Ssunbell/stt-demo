# 🎤 오디오 입력 장치 가이드

Expo 앱에서 음성 녹음 시 어떤 마이크가 사용되는지 설명합니다.

## 📱 환경별 오디오 입력 장치

### iOS 시뮬레이터 (Mac에서 실행)

**사용되는 마이크**: ✅ **Mac의 마이크**

```bash
npm run ios
```

#### 특징
- Mac에 내장된 마이크 사용
- 외부 마이크 연결 시 외부 마이크 사용
- 시스템 환경설정 → 사운드 → 입력에서 설정한 기본 마이크 사용

#### 권한 설정
1. 시뮬레이터에서 앱 실행
2. 마이크 권한 요청 → "허용" 클릭
3. Mac 시스템 권한도 필요할 수 있음:
   ```
   시스템 환경설정 → 보안 및 개인 정보 보호 → 마이크
   → Xcode Simulator 체크
   ```

#### 테스트 방법
```bash
# 1. iOS 시뮬레이터로 실행
npm run ios

# 2. 앱에서 "녹음 시작" 클릭
# 3. Mac 마이크에 대고 말하기
# 4. 텍스트 변환 확인
```

---

### Android 에뮬레이터 (Mac에서 실행)

**사용되는 마이크**: ✅ **Mac의 마이크**

```bash
npm run android
```

#### 특징
- Mac의 마이크를 가상 마이크로 사용
- 에뮬레이터 설정에서 활성화 필요

#### 에뮬레이터 마이크 설정
1. Android 에뮬레이터 실행
2. 에뮬레이터 옆 패널 → "..." (More) 클릭
3. Settings → Microphone
4. "Virtual microphone uses host audio input" 활성화 ✅

#### 권한 설정
- 앱에서 마이크 권한 요청 시 "허용"
- Android 설정 → 앱 → STTMobileApp → 권한 → 마이크 허용

---

### Expo Go 앱 (실제 iPhone/Android 기기)

**사용되는 마이크**: ❌ **기기의 마이크** (Mac 아님!)

```bash
npm start
# QR 코드를 실제 기기에서 스캔
```

#### 특징
- **실제 스마트폰/태블릿의 마이크 사용**
- Mac의 마이크는 **사용되지 않음**
- 기기에서 직접 말해야 함

#### 테스트 방법
1. 스마트폰에 Expo Go 앱 설치
2. `npm start` 실행 후 QR 코드 스캔
3. **스마트폰 마이크에 대고** 말하기
4. Mac에 대고 말해도 녹음 안 됨 ⚠️

---

### 웹 브라우저 (Mac에서 실행)

**사용되는 마이크**: ✅ **Mac의 마이크**

```bash
npm run web
```

#### 특징
- Mac의 기본 마이크 사용
- Chrome/Safari 브라우저 권한 필요

#### 권한 설정
1. 브라우저에서 앱 실행
2. 마이크 권한 요청 팝업 → "허용" 클릭
3. 주소창 왼쪽 자물쇠/카메라 아이콘으로 권한 관리

#### 브라우저별 설정

**Chrome:**
```
chrome://settings/content/microphone
```

**Safari:**
```
Safari → 환경설정 → 웹사이트 → 마이크
```

---

## 🎯 현재 환경 확인

### 어떤 방법으로 실행했나요?

#### 방법 1: iOS 시뮬레이터
```bash
npm run ios
```
→ ✅ **Mac 마이크 사용**

#### 방법 2: Android 에뮬레이터
```bash
npm run android
```
→ ✅ **Mac 마이크 사용**

#### 방법 3: Expo Go (실제 기기)
```bash
npm start
# QR 스캔
```
→ ❌ **기기 마이크 사용** (Mac 아님)

#### 방법 4: 웹
```bash
npm run web
```
→ ✅ **Mac 마이크 사용**

---

## 🔍 마이크 테스트

### Mac 마이크 작동 확인

**시스템 환경설정에서:**
1. 시스템 환경설정 → 사운드 → 입력
2. 말하면서 입력 레벨 확인
3. 막대가 움직이면 마이크 정상 ✅

**QuickTime으로 테스트:**
```
QuickTime Player → 파일 → 새로운 오디오 녹음
→ 녹음 버튼 클릭 후 말하기
```

### 앱에서 마이크 확인

1. 앱 실행
2. "녹음 시작" 클릭
3. 오디오 시각화(파형) 확인
   - 말할 때 막대가 움직이면 마이크 작동 ✅
   - 움직이지 않으면 권한 또는 마이크 문제 ⚠️

---

## ⚠️ 일반적인 문제

### "마이크가 작동하지 않아요"

#### iOS 시뮬레이터
1. **시스템 권한 확인:**
   ```
   시스템 환경설정 → 보안 및 개인 정보 보호 → 마이크
   → Simulator 또는 Xcode 체크
   ```

2. **시뮬레이터 재시작:**
   ```
   Device → Erase All Content and Settings
   ```

3. **앱 재설치**

#### Android 에뮬레이터
1. **에뮬레이터 마이크 설정:**
   ```
   에뮬레이터 → ... → Settings → Microphone
   → "Virtual microphone uses host audio input" 활성화
   ```

2. **에뮬레이터 재시작**

3. **AVD 재생성:**
   ```
   Android Studio → AVD Manager → 에뮬레이터 삭제 후 재생성
   ```

### "권한을 허용했는데도 안 돼요"

1. **앱 완전 삭제 후 재설치**
2. **시뮬레이터/에뮬레이터 재시작**
3. **Mac 재부팅**

---

## 💡 팁

### 1. 외부 마이크 사용

Mac에 외부 마이크 연결 시:

```
시스템 환경설정 → 사운드 → 입력
→ 외부 마이크 선택
```

iOS 시뮬레이터와 Android 에뮬레이터가 자동으로 사용합니다.

### 2. 마이크 음량 조절

입력 음량이 너무 작거나 크면:

```
시스템 환경설정 → 사운드 → 입력
→ 입력 음량 슬라이더 조절
```

### 3. 여러 마이크 전환

Mac에 여러 마이크가 있으면:
- 시스템 환경설정에서 기본 마이크 변경
- 앱 재시작하여 적용

### 4. AirPods/Bluetooth 마이크

AirPods 연결 시:
- AirPods 마이크가 자동으로 선택될 수 있음
- 품질이 다를 수 있으니 테스트 필요

---

## 📊 요약 표

| 실행 방법 | Mac 마이크 사용? | 기기 마이크 사용? |
|-----------|------------------|-------------------|
| **iOS 시뮬레이터** | ✅ 예 | ❌ 아니오 |
| **Android 에뮬레이터** | ✅ 예 | ❌ 아니오 |
| **Expo Go (실제 기기)** | ❌ 아니오 | ✅ 예 |
| **웹 브라우저** | ✅ 예 | ❌ 아니오 |

---

## 🎤 권장 테스트 환경

### 개발 중 (Mac에서)
**추천**: **iOS 시뮬레이터** 또는 **웹 브라우저**
- Mac 마이크 사용 ✅
- 빠른 개발 및 테스트 가능
- 권한 설정 간단

### 실제 테스트 (배포 전)
**추천**: **Expo Go (실제 기기)**
- 실제 사용 환경과 동일
- 기기 마이크 품질 확인
- 실제 사용자 경험 테스트

---

**더 궁금하신가요?** [FAQ.md](./FAQ.md) 또는 [TROUBLESHOOTING.md](./TROUBLESHOOTING.md)를 확인하세요!

