# 📋 iOS 테스트 체크리스트

## 빌드 실행 중...

현재 iOS 시뮬레이터에서 앱을 빌드하고 있습니다.

---

## ✅ 사전 준비사항

### 1. 환경 확인
- [x] Xcode 설치됨
- [x] CocoaPods 설치됨 (v1.16.2)
- [x] iOS 시뮬레이터 사용 가능 (iPhone 16 Pro 실행 중)
- [x] 프로젝트 의존성 설치됨

### 2. 빌드 시작
```bash
# 실행된 명령어
npm run ios
```

---

## 🎯 앱 실행 후 테스트 항목

### A. 초기 실행 확인

- [ ] **앱이 시뮬레이터에서 정상 실행됨**
  - 스플래시 스크린 표시
  - 메인 화면 로드

- [ ] **UI 요소 확인**
  - 상단 상태 표시 영역
  - 트랜스크립트 뷰 (텍스트 표시 영역)
  - 하단 컨트롤 버튼 (🎤, ⏹️, 🗑️)

### B. 네트워크 연결 테스트

**⚠️ 주의: 백엔드 서버가 실행 중이어야 합니다**

서버 실행 방법:
```bash
cd /Users/lucas/workspace/stt-demo/server
python main.py
```

- [ ] **WebSocket 연결 상태**
  - 상단에 연결 상태 표시
  - 녹색 = 연결됨
  - 빨간색 = 연결 안됨
  - 회색 = 연결 중

- [ ] **연결 실패 시 재시도**
  - 자동으로 재연결 시도
  - 에러 메시지 표시

### C. 오디오 녹음 테스트

- [ ] **마이크 권한 요청**
  - 첫 실행 시 권한 요청 팝업
  - "허용" 선택

- [ ] **녹음 시작 (🎤 버튼)**
  - 버튼 클릭 시 녹음 시작
  - 버튼 색상 변경 (빨간색)
  - 상태 표시: "Recording..."

- [ ] **오디오 스트리밍**
  - 음성 입력 시 서버로 전송
  - 콘솔에 오디오 데이터 전송 로그

- [ ] **녹음 중지 (⏹️ 버튼)**
  - 버튼 클릭 시 녹음 중지
  - 상태 표시: "Idle" 또는 "Stopped"

### D. 음성 인식 테스트

**테스트 문장:**
1. "안녕하세요"
2. "오늘 날씨가 좋네요"
3. "실시간 음성 인식 테스트입니다"

- [ ] **실시간 텍스트 변환 (Interim)**
  - 말하는 동안 중간 결과 표시
  - 흐릿한 색상으로 표시

- [ ] **최종 텍스트 표시 (Final)**
  - 문장 완성 후 최종 결과
  - 진한 색상으로 표시
  - 리스트에 추가됨

- [ ] **여러 문장 처리**
  - 순차적으로 텍스트 누적
  - 스크롤 가능

### E. UI 상호작용 테스트

- [ ] **텍스트 지우기 (🗑️버튼)**
  - 모든 트랜스크립트 삭제
  - 화면 초기화

- [ ] **에러 처리**
  - 에러 메시지 표시
  - 닫기 버튼으로 에러 해제

- [ ] **스크롤 기능**
  - 긴 텍스트 스크롤 가능
  - 새 텍스트 추가 시 자동 스크롤

### F. 성능 테스트

- [ ] **메모리 사용량**
  - 장시간 녹음 시 메모리 누수 없음
  - Xcode Instruments로 확인 가능

- [ ] **배터리 소모**
  - 적정 수준의 배터리 사용

- [ ] **네트워크 안정성**
  - 연결 끊김 시 재연결
  - 데이터 손실 없음

### G. 에지 케이스 테스트

- [ ] **백그라운드 전환**
  - 앱을 백그라운드로 보냄
  - 다시 포그라운드로 전환
  - 정상 동작 확인

- [ ] **녹음 중 중단**
  - 녹음 중 다른 앱 실행
  - 전화 걸려옴 시나리오

- [ ] **네트워크 연결 끊김**
  - Wi-Fi 끄기
  - 재연결 시 복구

- [ ] **권한 거부 후 허용**
  - 마이크 권한 거부
  - 설정에서 다시 허용
  - 앱 재시작 없이 동작

---

## 🐛 알려진 이슈 및 해결방법

### 1. "Expo Go 경고" 표시
**증상**: Expo Go 모듈 경고가 표시됨

**해결**: 
- 네이티브 빌드를 사용 중이므로 무시 가능
- 경고 닫기 버튼 클릭
- 앱 완전 종료 후 재시작

### 2. WebSocket 연결 실패
**증상**: "연결 안됨" 상태 지속

**원인 및 해결**:
```bash
# 1. 서버가 실행 중인지 확인
cd /Users/lucas/workspace/stt-demo/server
python main.py

# 2. 포트 8000이 사용 중인지 확인
lsof -i :8000

# 3. 방화벽 설정 확인
# macOS 설정 > 보안 및 개인 정보 보호 > 방화벽
```

### 3. 마이크 권한 없음
**증상**: 녹음 시작 시 에러

**해결**:
```
1. iOS 설정 열기
2. 하단으로 스크롤하여 "STTMobileApp" 찾기
3. 마이크 권한 토글 활성화
4. 앱 재시작
```

### 4. 오디오가 전송되지 않음
**증상**: 녹음 중이지만 텍스트 변환 안됨

**확인사항**:
- 시뮬레이터는 Mac 마이크를 사용
- Mac 시스템 설정 > 사운드 > 입력에서 마이크 활성화
- 마이크 입력 레벨 확인

### 5. 빌드 실패
**해결 방법**:
```bash
# 캐시 정리 후 재빌드
cd /Users/lucas/workspace/stt-demo/client/mobile/STTMobileApp

# iOS 폴더 정리
cd ios
rm -rf Pods Podfile.lock
pod install
cd ..

# Node modules 재설치
rm -rf node_modules package-lock.json
npm install

# 재빌드
npm run ios
```

---

## 📊 테스트 결과 기록

### 빌드 정보
- **날짜**: 2025-12-14
- **디바이스**: iPhone 16 Pro (시뮬레이터)
- **iOS 버전**: [빌드 후 확인]
- **앱 버전**: 1.0.0

### 테스트 결과
| 항목 | 상태 | 비고 |
|------|------|------|
| 빌드 성공 | ⏳ | 진행 중... |
| 앱 실행 | ⏳ | 대기 중 |
| WebSocket 연결 | ⏳ | 서버 실행 필요 |
| 마이크 권한 | ⏳ | 대기 중 |
| 음성 인식 | ⏳ | 대기 중 |
| UI 반응성 | ⏳ | 대기 중 |
| 에러 처리 | ⏳ | 대기 중 |

---

## 🎬 다음 단계

### 빌드 완료 후:

1. **앱 자동 실행 확인**
   - 시뮬레이터에서 앱이 자동으로 열림
   - Metro bundler가 JavaScript 번들 제공

2. **서버 실행**
   ```bash
   cd /Users/lucas/workspace/stt-demo/server
   python main.py
   ```

3. **기본 기능 테스트**
   - 위 체크리스트 A~D 항목 순서대로 테스트

4. **문제 발생 시**
   - 터미널 로그 확인
   - Xcode 콘솔 로그 확인
   - `IOS_BUILD_GUIDE.md` 문제 해결 섹션 참고

---

## 📱 실제 디바이스 테스트 (선택)

시뮬레이터 테스트 완료 후 실제 iPhone에서 테스트하려면:

1. **iPhone USB 연결**
2. **개발 팀 설정** (Xcode에서)
3. **실행 명령**:
   ```bash
   npx expo run:ios --device
   ```

4. **네트워크 설정 변경**:
   ```typescript
   // src/utils/config.ts
   const baseUrl = '192.168.x.x:8000'; // Mac IP 주소
   ```

---

## 📞 도움말

문제가 계속되면 다음 문서를 참고하세요:

- `IOS_BUILD_GUIDE.md` - iOS 빌드 상세 가이드
- `AUDIO_DEVICE_GUIDE.md` - 오디오 설정 가이드
- `TROUBLESHOOTING.md` - 일반 문제 해결
- `TESTING_GUIDE.md` - 전체 테스트 가이드

---

**현재 상태**: 🏗️ iOS 빌드 진행 중

잠시 후 빌드가 완료되면 시뮬레이터에서 앱이 자동으로 실행됩니다!

